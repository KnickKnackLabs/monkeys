#!/usr/bin/env bash
#MISE description="Welcome message and setup verification"

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
REPO_DIR="$(cd "$SCRIPT_DIR/../.." && pwd)"

echo ""
echo "Welcome to monkeys!"
echo ""
echo "CLI for generating media via Hugging Face."
echo ""
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "Commands:"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "  monkeys generate <prompt>   Generate an image from a text prompt"
echo "  monkeys speak <text>        Generate speech from text"
echo "  monkeys welcome             This message"
echo "  monkeys tasks               List all available tasks"
echo ""
echo "Examples:"
echo ""
echo "  monkeys generate \"a cartoon monkey\""
echo "  monkeys generate \"pixel art sunset\" -o sunset.png"
echo "  monkeys generate \"a cat\" --model stabilityai/stable-diffusion-xl-base-1.0"
echo "  monkeys speak \"Hello world\""
echo "  monkeys speak \"Good morning\" --voice af_bella -o morning.wav"
echo ""
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "Setup:"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
if [[ -n "${HF_TOKEN:-}" ]]; then
    echo "  HF_TOKEN: ✓ set (needed for image generation)"
else
    echo "  HF_TOKEN: ✗ not set (needed for image generation)"
    echo "            Get a token at https://huggingface.co/settings/tokens"
fi
echo "  speak:    runs locally, no token needed"
echo ""
# Cache stats
STATS=$(mise run --quiet _cache-stats)
CACHE_COUNT="${STATS%% *}"
CACHE_SIZE="${STATS#* }"
echo "  Cache:    $CACHE_COUNT entries, $CACHE_SIZE"
echo ""
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "Location: $REPO_DIR"
echo ""
